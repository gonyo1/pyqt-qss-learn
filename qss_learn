import sys
from PyQt5.QtWidgets import (
    QApplication, QWidget, QHBoxLayout, QVBoxLayout, QTextEdit, 
    QLabel, QPushButton, QFrame, QLineEdit, QCheckBox, QRadioButton,
    QProgressBar, QGroupBox, QGridLayout, QInputDialog, QMessageBox, QDialog,
    QComboBox, QSpinBox, QToolTip
)
from PyQt5.QtCore import Qt, QTimer
from PyQt5.QtGui import QColor, QFont

# [ìˆ˜ì •ë¨] ë³µì¡í•œ setupì„ ìœ„í•œ í—¬í¼ í•¨ìˆ˜ ì •ì˜
def setup_level_4():
    ok_button = QPushButton("í™•ì¸")
    ok_button.setObjectName("okButton")
    cancel_button = QPushButton("ì·¨ì†Œ")
    cancel_button.setObjectName("cancelButton")
    return [ok_button, cancel_button]

def setup_level_5():
    title_label = QLabel("ì œëª©")
    title_label.setObjectName("titleLabel")
    return [title_label, QLabel("ì¼ë°˜ í…ìŠ¤íŠ¸")]

def setup_level_10():
    normal_button = QPushButton("ì¼ë°˜")
    normal_button.setProperty("data-role", "normal")
    danger_button = QPushButton("ì‚­ì œ")
    danger_button.setProperty("data-role", "danger")
    return [normal_button, danger_button]
    
def setup_level_11():
    frame = QFrame()
    layout = QHBoxLayout(frame)
    layout.addWidget(QPushButton("A"))
    layout.addWidget(QLabel("ë¼ë²¨"))
    layout.addWidget(QPushButton("B"))
    return [frame, QPushButton("ë°”ê¹¥ ë²„íŠ¼")]

def setup_level_12():
    parent_frame = QFrame()
    parent_layout = QVBoxLayout(parent_frame)
    parent_layout.addWidget(QLabel("ì§ì† ìì‹"))
    
    child_frame = QFrame()
    child_layout = QVBoxLayout(child_frame)
    child_layout.addWidget(QLabel("ì†ì"))
    
    parent_layout.addWidget(child_frame)
    return [parent_frame]

def setup_level_13():
    btn = QPushButton("ë¡œê·¸ì¸")
    btn.setObjectName("loginButton")
    return [btn]

def setup_level_20():
    btn = QPushButton("ì´ë¯¸ì§€ ë²„íŠ¼")
    btn.setObjectName("imageButton")
    btn.setMinimumHeight(40)
    return [btn]

def setup_level_25():
    btn1 = QPushButton("ì¼ë°˜1")
    special_btn = QPushButton("íŠ¹ë³„")
    special_btn.setObjectName("special")
    btn2 = QPushButton("ì¼ë°˜2")
    return [btn1, special_btn, btn2]
    
def setup_level_40():
    frame = QFrame()
    frame_layout = QVBoxLayout(frame)
    group_box = QGroupBox("ê·¸ë£¹")
    group_layout = QVBoxLayout(group_box)
    group_layout.addWidget(QPushButton("ì„ íƒ ëŒ€ìƒ"))
    frame_layout.addWidget(group_box)
    return [frame]

def setup_level_50():
    final_btn = QPushButton("ì™„ë£Œ")
    final_btn.setObjectName("finalButton")
    cancel_btn = QPushButton("ì·¨ì†Œ")
    cancel_btn.setObjectName("cancelButton")
    return [final_btn, cancel_btn, QLineEdit()]

# [ìˆ˜ì •ë¨] 50ê°œì˜ ë ˆë²¨ì„ 6ë‹¨ê³„ ì»¤ë¦¬í˜ëŸ¼ìœ¼ë¡œ ì¬êµ¬ì„±
LEVELS = [
    # --- 1ë‹¨ê³„: ê¸°ë³¸ ì†ì„± (10ë¬¸ì œ) ---
    {
        "title": "[1-1] ë°°ê²½ìƒ‰ ë°”ê¾¸ê¸° (background-color)",
        "description": "ëª¨ë“  QPushButtonì˜ ë°°ê²½ìƒ‰ì„ <code>#0078d7</code> (íŒŒë€ìƒ‰)ìœ¼ë¡œ ë°”ê¿”ë³´ì„¸ìš”.",
        "hint": "ë°°ê²½ìƒ‰ì€ 'background-color' ì†ì„±ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆì–´ìš”.",
        "setup": lambda: [QPushButton("ë²„íŠ¼ 1"), QPushButton("ë²„íŠ¼ 2")],
        "solution": lambda p, c: "qpushbutton" in c and "background-color" in c and "#0078d7" in c,
        "correctCode": "QPushButton {\n  background-color: #0078d7;\n}"
    },
    {
        "title": "[1-2] ê¸€ììƒ‰ ë°”ê¾¸ê¸° (color)",
        "description": "ëª¨ë“  QLabelì˜ ê¸€ììƒ‰ì„ <code>#e74c3c</code> (ë¹¨ê°„ìƒ‰)ìœ¼ë¡œ ë°”ê¿”ë³´ì„¸ìš”.",
        "hint": "ê¸€ììƒ‰ì€ 'color' ì†ì„±ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆì–´ìš”.",
        "setup": lambda: [QLabel("ì´ê²ƒì€ ë¼ë²¨ì…ë‹ˆë‹¤.")],
        "solution": lambda p, c: "qlabel" in c and "color" in c and "#e74c3c" in c,
        "correctCode": "QLabel {\n  color: #e74c3c;\n}"
    },
    {
        "title": "[1-3] í…Œë‘ë¦¬ ì„¤ì •í•˜ê¸° (border)",
        "description": "ëª¨ë“  QLineEditì˜ í…Œë‘ë¦¬ë¥¼ <code>2px solid #f1c40f</code> (ë…¸ë€ìƒ‰)ë¡œ ë§Œë“¤ì–´ë³´ì„¸ìš”.",
        "hint": "í…Œë‘ë¦¬(border)ëŠ” 'ë‘ê»˜ ìŠ¤íƒ€ì¼ ìƒ‰ìƒ' ìˆœì„œë¡œ ê°’ì„ ì •í•´ì¤„ ìˆ˜ ìˆì–´ìš”.",
        "setup": lambda: [QLineEdit("í…ìŠ¤íŠ¸ ì…ë ¥")],
        "solution": lambda p, c: "2px" in c and "solid" in c and ("#f1c40f" in c or "yellow" in c),
        "correctCode": "QLineEdit {\n  border: 2px solid #f1c40f;\n}"
    },
    {
        "title": "[1-4] ê¸€ì í¬ê¸° ë°”ê¾¸ê¸° (font-size)",
        "description": "ëª¨ë“  QLabelì˜ í°íŠ¸ í¬ê¸°ë¥¼ <code>20px</code>ë¡œ í‚¤ì›Œë³´ì„¸ìš”.",
        "hint": "ê¸€ì í¬ê¸°ëŠ” 'font-size' ì†ì„±ìœ¼ë¡œ ì¡°ì ˆí•  ìˆ˜ ìˆì–´ìš”.",
        "setup": lambda: [QLabel("ê¸€ì í¬ê¸° í…ŒìŠ¤íŠ¸")],
        "solution": lambda p, c: "qlabel" in c and "font-size" in c and "20px" in c,
        "correctCode": "QLabel {\n  font-size: 20px;\n}"
    },
    {
        "title": "[1-5] ê¸€ì êµµê²Œ ë§Œë“¤ê¸° (font-weight)",
        "description": "ëª¨ë“  QPushButtonì˜ ê¸€ìë¥¼ êµµê²Œ(<code>bold</code>) ë§Œë“œì„¸ìš”.",
        "hint": "ê¸€ì ë‘ê»˜ëŠ” 'font-weight' ì†ì„±ìœ¼ë¡œ ì¡°ì ˆí•´ìš”. 'bold'ë¼ê³  ì“°ë©´ êµµì–´ì ¸ìš”.",
        "setup": lambda: [QPushButton("êµµì€ ê¸€ì”¨ ë²„íŠ¼")],
        "solution": lambda p, c: "qpushbutton" in c and "font-weight" in c and "bold" in c,
        "correctCode": "QPushButton {\n  font-weight: bold;\n}"
    },
    {
        "title": "[1-6] ê¸€ì ê¸°ìš¸ì´ê¸° (font-style)",
        "description": "ëª¨ë“  QLabelì˜ í°íŠ¸ë¥¼ ê¸°ìš¸ì„(<code>italic</code>)ìœ¼ë¡œ ë³€ê²½í•˜ì„¸ìš”.",
        "hint": "ê¸€ìë¥¼ ê¸°ìš¸ì´ëŠ” ì†ì„±ì€ 'font-style'ì´ê³ , ê°’ì€ 'italic'ì´ì—ìš”.",
        "setup": lambda: [QLabel("ê¸°ìš¸ì–´ì§„ í…ìŠ¤íŠ¸")],
        "solution": lambda p, c: "qlabel" in c and "font-style" in c and "italic" in c,
        "correctCode": "QLabel {\n  font-style: italic;\n}"
    },
    {
        "title": "[1-7] í…Œë‘ë¦¬ ë‘¥ê¸€ê²Œ (border-radius)",
        "description": "ëª¨ë“  QPushButtonì˜ ëª¨ì„œë¦¬ë¥¼ <code>10px</code>ë§Œí¼ ë‘¥ê¸€ê²Œ ë§Œë“œì„¸ìš”.",
        "hint": "ëª¨ì„œë¦¬ë¥¼ ë‘¥ê¸€ê²Œ ë§Œë“¤ë ¤ë©´ 'border-radius'ë¥¼ ì‚¬ìš©í•´ìš”.",
        "setup": lambda: [QPushButton("ë‘¥ê·¼ ë²„íŠ¼")],
        "solution": lambda p, c: "border-radius" in c and "10px" in c,
        "correctCode": "QPushButton {\n  border-radius: 10px;\n}"
    },
    {
        "title": "[1-8] ìµœì†Œ ë„ˆë¹„ ì§€ì • (min-width)",
        "description": "ëª¨ë“  QPushButtonì˜ ìµœì†Œ ë„ˆë¹„ë¥¼ <code>150px</code>ë¡œ ì„¤ì •í•˜ì„¸ìš”.",
        "hint": "ìµœì†Œ ë„ˆë¹„ëŠ” 'min-width' ì†ì„±ìœ¼ë¡œ ì •í•  ìˆ˜ ìˆì–´ìš”.",
        "setup": lambda: [QPushButton("ì§§ì€ê¸€")],
        "solution": lambda p, c: "min-width" in c and "150px" in c,
        "correctCode": "QPushButton {\n  min-width: 150px;\n}"
    },
    {
        "title": "[1-9] ì•ˆìª½ ì—¬ë°± ì£¼ê¸° (padding)",
        "description": "ëª¨ë“  QPushButtonì˜ ë‚´ë¶€ ì—¬ë°±(<code>padding</code>)ì„ <code>10px</code>ë¡œ ì„¤ì •í•˜ì—¬ ë²„íŠ¼ì„ ë” í¬ê²Œ ë§Œë“œì„¸ìš”.",
        "hint": "ì•ˆìª½ ì—¬ë°±ì„ ì˜ë¯¸í•˜ëŠ” 'padding' ì†ì„±ì„ ì‚¬ìš©í•´ ë³´ì„¸ìš”.",
        "setup": lambda: [QPushButton("ë„“ì–´ì§„ ë²„íŠ¼")],
        "solution": lambda p, c: "padding" in c and "10px" in c,
        "correctCode": "QPushButton {\n  padding: 10px;\n}"
    },
    {
        "title": "[1-10] ë°”ê¹¥ ì—¬ë°± ì£¼ê¸° (margin)",
        "description": "ëª¨ë“  QPushButtonì— <code>10px</code>ì˜ ë°”ê¹¥ ì—¬ë°±ì„ ì£¼ì„¸ìš”.",
        "hint": "ìœ„ì ¯ì˜ ë°”ê¹¥ ì—¬ë°±ì€ 'margin'ìœ¼ë¡œ ì¡°ì ˆí•´ìš”.",
        "setup": lambda: [QPushButton("ë²„íŠ¼1"), QPushButton("ë²„íŠ¼2")],
        "solution": lambda p, c: "margin" in c and "10px" in c,
        "correctCode": "QPushButton {\n  margin: 10px;\n}"
    },
    # --- 2ë‹¨ê³„: ê¸°ë³¸ ì„ íƒì (8ë¬¸ì œ) ---
    {
        "title": "[2-1] ID ì„ íƒì (#)",
        "description": "ì´ë¦„ì´ <code>okButton</code>ì¸ QPushButtonì˜ ë°°ê²½ìƒ‰ë§Œ <code>#2ecc71</code> (ë…¹ìƒ‰)ìœ¼ë¡œ ë°”ê¿”ë³´ì„¸ìš”.",
        "hint": "íŠ¹ì •í•œ ìœ„ì ¯ í•˜ë‚˜ë§Œ ì„ íƒí•  ë•ŒëŠ” ì´ë¦„ ì•ì— '#' ê¸°í˜¸ë¥¼ ë¶™ì—¬ìš”.",
        "setup": setup_level_4,
        "solution": lambda p, c: "#okbutton" in c and "background-color" in c and "#2ecc71" in c,
        "correctCode": "#okButton {\n  background-color: #2ecc71;\n}"
    },
    {
        "title": "[2-2] ID ì„ íƒìë¡œ í°íŠ¸ ë°”ê¾¸ê¸°",
        "description": "ì´ë¦„ì´ <code>titleLabel</code>ì¸ QLabelì˜ í°íŠ¸ í¬ê¸°ë¥¼ <code>20px</code>ë¡œ í‚¤ì›Œë³´ì„¸ìš”.",
        "hint": "ID ì„ íƒìì™€ í°íŠ¸ ì†ì„±ì„ í•¨ê»˜ ì‚¬ìš©í•´ ë³´ì„¸ìš”.",
        "setup": setup_level_5,
        "solution": lambda p, c: "#titlelabel" in c and "font-size" in c and "20px" in c,
        "correctCode": "#titleLabel {\n  font-size: 20px;\n}"
    },
    {
        "title": "[2-3] ì†ì„± ì„ íƒì ([])",
        "description": "<code>enabled</code> ì†ì„±ì´ <code>false</code>ì¸ ë²„íŠ¼ì˜ ê¸€ììƒ‰ì„ <code>#888</code>ë¡œ ë§Œë“œì„¸ìš”.",
        "hint": "íŠ¹ì • ì†ì„±ì„ ê°€ì§„ ìœ„ì ¯ì€ ëŒ€ê´„í˜¸ '[]'ë¥¼ ì‚¬ìš©í•´ì„œ ì°¾ì„ ìˆ˜ ìˆì–´ìš”.",
        "setup": lambda: [QPushButton("í™œì„± ë²„íŠ¼"), (lambda b: (b.setEnabled(False), b)[1])(QPushButton("ë¹„í™œì„± ë²„íŠ¼"))],
        "solution": lambda p, c: "[enabled=\"false\"]" in c,
        "correctCode": "QPushButton[enabled=\"false\"] {\n  color: #888;\n}"
    },
    {
        "title": "[2-4] ì†ì„±ê°’ ì„ íƒì ([key=value])",
        "description": "<code>data-role</code> ì†ì„±ì´ <code>danger</code>ì¸ ë²„íŠ¼ì˜ ê¸€ììƒ‰ì„ í°ìƒ‰, ë°°ê²½ìƒ‰ì„ ë¹¨ê°„ìƒ‰(<code>red</code>)ìœ¼ë¡œ ë°”ê¾¸ì„¸ìš”.",
        "hint": "ì†ì„±ê³¼ ê°’ì„ í•¨ê»˜ ì‚¬ìš©í•˜ë ¤ë©´ '[ì†ì„±=ê°’]' í˜•íƒœë¡œ ì“¸ ìˆ˜ ìˆì–´ìš”.",
        "setup": setup_level_10,
        "solution": lambda p, c: "danger" in c and "red" in c,
        "correctCode": "QPushButton[data-role=\"danger\"] {\n  color: white;\n  background-color: red;\n}"
    },
    {
        "title": "[2-5] ê·¸ë£¹ ì„ íƒì (,)",
        "description": "<code>QPushButton</code>ê³¼ <code>QLabel</code> ëª¨ë‘ì˜ ê¸€ììƒ‰ì„ <code>#50c878</code> (ì—ë©”ë„ë“œìƒ‰)ìœ¼ë¡œ ë°”ê¾¸ì„¸ìš”.",
        "hint": "ì—¬ëŸ¬ ìœ„ì ¯ì— ê°™ì€ ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ë ¤ë©´ ì‰¼í‘œ(,)ë¡œ ì„ íƒìë¥¼ ì—°ê²°í•  ìˆ˜ ìˆì–´ìš”.",
        "setup": lambda: [QPushButton("ë²„íŠ¼"), QLabel("ë¼ë²¨")],
        "solution": lambda p, c: "qpushbutton," in c and ",qlabel" in c,
        "correctCode": "QPushButton, QLabel {\n  color: #50c878;\n}"
    },
    {
        "title": "[2-6] ì „ì²´ ì„ íƒì (*)",
        "description": "ëª¨ë“  ìœ„ì ¯ì˜ í…Œë‘ë¦¬ë¥¼ <code>1px solid red</code>ë¡œ ë§Œë“œì„¸ìš”.",
        "hint": "ë³„í‘œ(*)ëŠ” ëª¨ë“  ìœ„ì ¯ì„ ì„ íƒí•˜ëŠ” 'ì „ì²´ ì„ íƒì'ì˜ˆìš”.",
        "setup": lambda: [QPushButton("ë²„íŠ¼"), QLabel("ë¼ë²¨")],
        "solution": lambda p, c: c.strip().startswith("*"),
        "correctCode": "* {\n  border: 1px solid red;\n}"
    },
    {
        "title": "[2-7] ìì† ì„ íƒì ( )",
        "description": "<code>QFrame</code> ì•ˆì— ìˆëŠ” ëª¨ë“  <code>QPushButton</code>ì˜ í…Œë‘ë¦¬ë¥¼ ë‘¥ê¸€ê²Œ(<code>border-radius: 15px</code>) ë§Œë“œì„¸ìš”.",
        "hint": "A ì•ˆì— ìˆëŠ” Bë¥¼ ì„ íƒí•  ë• 'A B'ì²˜ëŸ¼ ë„ì–´ì“°ê¸°ë¥¼ í•´ìš”.",
        "setup": setup_level_11,
        "solution": lambda p, c: "qframeqpushbutton" in c and "15px" in c,
        "correctCode": "QFrame QPushButton {\n  border-radius: 15px;\n}"
    },
    {
        "title": "[2-8] ìì‹ ì„ íƒì (>)",
        "description": "<code>QFrame</code>ì˜ ë°”ë¡œ ì•„ë˜ ìì‹ì¸ <code>QLabel</code>ì˜ ê¸€ìë¥¼ êµµê²Œ(<code>font-weight: bold</code>) ë§Œë“œì„¸ìš”.",
        "hint": "A ë°”ë¡œ ì•„ë˜ ìˆëŠ” Bë¥¼ ì„ íƒí•  ë• 'A > B'ì²˜ëŸ¼ ë¶€ë“±í˜¸ë¥¼ ì¨ìš”.",
        "setup": setup_level_12,
        "solution": lambda p, c: "qframe>qlabel" in c and "bold" in c,
        "correctCode": "QFrame > QLabel {\n  font-weight: bold;\n}"
    },
    # --- 3ë‹¨ê³„: ìƒíƒœ ì„ íƒì (10ë¬¸ì œ) ---
    {
        "title": "[3-1] ë§ˆìš°ìŠ¤ ì˜¤ë²„ (:hover)",
        "description": "QPushButtonì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œ ë°°ê²½ìƒ‰ì„ <code>#e5f1fb</code>ë¡œ ë°”ê¾¸ì„¸ìš”.",
        "hint": "ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œì˜ ìƒíƒœëŠ” ìœ„ì ¯ ì´ë¦„ ë’¤ì— ':hover'ë¥¼ ë¶™ì—¬ì„œ í‘œí˜„í•´ìš”.",
        "setup": lambda: [QPushButton("ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¤ë³´ì„¸ìš”")],
        "solution": lambda p, c: "pushbutton:hover" in c,
        "correctCode": "QPushButton:hover {\n  background-color: #e5f1fb;\n}"
    },
    {
        "title": "[3-2] ë§ˆìš°ìŠ¤ í´ë¦­ (:pressed)",
        "description": "QPushButtonì„ í´ë¦­í–ˆì„ ë•Œ ë°°ê²½ìƒ‰ì´ <code>#cce4f7</code>ë¡œ ë°”ë€Œê²Œ í•´ë³´ì„¸ìš”.",
        "hint": "ë§ˆìš°ìŠ¤ë¡œ ê¾¹ ëˆ„ë¥´ê³  ìˆëŠ” ìƒíƒœëŠ” ':pressed'ë¼ê³  í•´ìš”.",
        "setup": lambda: [QPushButton("í´ë¦­í•´ë³´ì„¸ìš”")],
        "solution": lambda p, c: "pushbutton:pressed" in c,
        "correctCode": "QPushButton:pressed {\n  background-color: #cce4f7;\n}"
    },
    {
        "title": "[3-3] ì…ë ¥ í¬ì»¤ìŠ¤ (:focus)",
        "description": "QLineEditê°€ ì„ íƒë˜ì—ˆì„ ë•Œ, í…Œë‘ë¦¬ ìƒ‰ì„ <code>#0078d7</code> (íŒŒë€ìƒ‰)ìœ¼ë¡œ ë°”ê¿”ë³´ì„¸ìš”.",
        "hint": "ì…ë ¥ì°½ì„ í´ë¦­í•´ì„œ ì»¤ì„œê°€ ê¹œë¹¡ì´ëŠ” ìƒíƒœë¥¼ ':focus'ë¼ê³  í•´ìš”.",
        "setup": lambda: [QLineEdit()],
        "solution": lambda p, c: "qlineedit:focus" in c,
        "correctCode": "QLineEdit:focus {\n  border-color: #0078d7;\n}"
    },
    {
        "title": "[3-4] ë¹„í™œì„± ìƒíƒœ (:disabled)",
        "description": "ë¹„í™œì„±í™”ëœ(<code>disabled</code>) <code>QPushButton</code>ì˜ ë°°ê²½ìƒ‰ì„ <code>#aaa</code>, ê¸€ììƒ‰ì„ <code>#555</code>ë¡œ ê³ ì •í•˜ì„¸ìš”.",
        "hint": "ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ìƒíƒœëŠ” ':disabled'ë¼ê³  í‘œí˜„í•´ìš”.",
        "setup": lambda: [(lambda b: (b.setEnabled(False), b)[1])(QPushButton("ë¹„í™œì„± ë²„íŠ¼"))],
        "solution": lambda p, c: "pushbutton:disabled" in c and "#aaa" in c,
        "correctCode": "QPushButton:disabled {\n  background-color: #aaa;\n  color: #555;\n}"
    },
    {
        "title": "[3-5] ì²´í¬ëœ ìƒíƒœ (:checked)",
        "description": "<code>QCheckBox</code>ê°€ ì²´í¬ë˜ì—ˆì„ ë•Œ(<code>:checked</code>) ê¸€ììƒ‰ì„ <code>#0078d7</code>ë¡œ ë°”ê¾¸ì„¸ìš”.",
        "hint": "ì²´í¬ëœ ìƒíƒœëŠ” ':checked' ì„ íƒìë¥¼ ì‚¬ìš©í•´ìš”.",
        "setup": lambda: [(lambda cb: (cb.setChecked(True), cb)[1])(QCheckBox("ì²´í¬ë¨"))],
        "solution": lambda p, c: "qcheckbox:checked" in c,
        "correctCode": "QCheckBox:checked {\n  color: #0078d7;\n}"
    },
    {
        "title": "[3-6] ì²´í¬ ì•ˆ ëœ ìƒíƒœ",
        "description": "<code>QCheckBox</code>ê°€ ì²´í¬ë˜ì§€ ì•Šì•˜ì„ ë•Œ(<code>:!checked</code>) ê¸€ìë¥¼ ê¸°ìš¸ì„ê¼´ë¡œ ë§Œë“œì„¸ìš”.",
        "hint": "ì²´í¬ ì•ˆ ëœ ìƒíƒœëŠ” ':!checked' ë˜ëŠ” ':not(:checked)'ë¥¼ ì‚¬ìš©í•´ìš”.",
        "setup": lambda: [QCheckBox("ì²´í¬ ì•ˆ ë¨")],
        "solution": lambda p, c: (":!checked" in c or ":not(:checked)" in c) and "italic" in c,
        "correctCode": "QCheckBox:!checked {\n  font-style: italic;\n}"
    },
    {
        "title": "[3-7] IDì™€ ìƒíƒœ ì¡°í•©",
        "description": "ì´ë¦„ì´ <code>loginButton</code>ì¸ ë²„íŠ¼ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œë§Œ í…Œë‘ë¦¬ë¥¼ <code>2px solid #0078d7</code>ë¡œ ë§Œë“œì„¸ìš”.",
        "hint": "ì„ íƒìëŠ” '#ì´ë¦„:ìƒíƒœ'ì²˜ëŸ¼ ë¶™ì—¬ì„œ ì“¸ ìˆ˜ ìˆì–´ìš”.",
        "setup": setup_level_13,
        "solution": lambda p, c: "#loginbutton:hover" in c,
        "correctCode": "#loginButton:hover {\n  border: 2px solid #0078d7;\n}"
    },
    {
        "title": "[3-8] ì†ì„±ê³¼ ìƒíƒœ ì¡°í•©",
        "description": "<code>data-role</code>ì´ <code>danger</code>ì¸ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ(<code>:pressed</code>) ë°°ê²½ìƒ‰ì„ <code>darkred</code>ë¡œ ë°”ê¾¸ì„¸ìš”.",
        "hint": "ì†ì„± ì„ íƒìì™€ ìƒíƒœ ì„ íƒìëŠ” ì´ì–´ì„œ ì“¸ ìˆ˜ ìˆì–´ìš”. ì˜ˆ: [key=value]:state",
        "setup": setup_level_10,
        "solution": lambda p, c: "[data-role=\"danger\"]:pressed" in c,
        "correctCode": "QPushButton[data-role=\"danger\"]:pressed {\n  background-color: darkred;\n}"
    },
    {
        "title": "[3-9] ì²´í¬ëœ ë¼ë””ì˜¤ ë²„íŠ¼",
        "description": "<code>QRadioButton</code>ì´ ì²´í¬ë˜ì—ˆì„ ë•Œ(<code>:checked</code>) ê¸€ìë¥¼ êµµê²Œ ë§Œë“œì„¸ìš”.",
        "hint": "ë¼ë””ì˜¤ ë²„íŠ¼ë„ ì²´í¬ë°•ìŠ¤ì²˜ëŸ¼ ':checked' ìƒíƒœë¥¼ ê°€ì ¸ìš”.",
        "setup": lambda: [(lambda r: (r.setChecked(True), r)[1])(QRadioButton("ì²´í¬ëœ ë¼ë””ì˜¤"))],
        "solution": lambda p, c: "qradiobutton:checked" in c,
        "correctCode": "QRadioButton:checked {\n  font-weight: bold;\n}"
    },
    {
        "title": "[3-10] ë‘ ê°€ì§€ ìƒíƒœ ì¡°í•©",
        "description": "<code>QPushButton</code>ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ê³ (<code>:hover</code>) í´ë¦­ê¹Œì§€ í–ˆì„ ë•Œ(<code>:pressed</code>) í…Œë‘ë¦¬ë¥¼ <code>2px solid red</code>ë¡œ ë§Œë“œì„¸ìš”.",
        "hint": "ë‘ ê°€ì§€ ìƒíƒœë¥¼ ë™ì‹œì— ë§Œì¡±í•˜ë ¤ë©´ ':hover:pressed' ì²˜ëŸ¼ ì´ì–´ì„œ ì“°ë©´ ë¼ìš”.",
        "setup": lambda: [QPushButton("Hover and Press")],
        "solution": lambda p, c: "pushbutton:hover:pressed" in c,
        "correctCode": "QPushButton:hover:pressed {\n  border: 2px solid red;\n}"
    },
    # --- [ìˆ˜ì •ë¨] 4ë‹¨ê³„: ì„ íƒì ì¡°í•© ë° ì‹¬í™” (8ë¬¸ì œ) ---
    {
        "title": "[4-1] íŠ¹ì • ìœ„ì ¯ ì œì™¸í•˜ê¸° (:not())",
        "description": "<code>#special</code> ë²„íŠ¼ì„ ì œì™¸í•œ ëª¨ë“  <code>QPushButton</code>ì˜ ë°°ê²½ì„ íšŒìƒ‰(<code>#ccc</code>)ìœ¼ë¡œ ë§Œë“œì„¸ìš”.",
        "hint": "íŠ¹ì • ì¡°ê±´ì„ ì œì™¸í•  ë•ŒëŠ” ':not()' ì„ íƒìë¥¼ ì‚¬ìš©í•´ìš”. ì´ ì„ íƒìëŠ” PyQtì—ì„œ ì˜ ë™ì‘í•©ë‹ˆë‹¤!",
        "setup": setup_level_25,
        "solution": lambda p, c: ":not(#special)" in c and "background-color" in c and "#ccc" in c,
        "correctCode": "QPushButton:not(#special) {\n  background-color: #ccc;\n}"
    },
    {
        "title": "[4-2] ë³µì¡í•œ ìì† ì„ íƒ",
        "description": "<code>QFrame</code> ì•ˆì˜ <code>QGroupBox</code> ì•ˆì— ìˆëŠ” <code>QPushButton</code>ì˜ ê¸€ììƒ‰ì„ <code>orange</code>ë¡œ ë°”ê¾¸ì„¸ìš”.",
        "hint": "ì„ íƒìë¥¼ ë„ì–´ì“°ê¸°ë¡œ ì—°ê²°í•˜ë©´ ì—¬ëŸ¬ ë‹¨ê³„ ì•„ë˜ì˜ ìì†ì„ ì„ íƒí•  ìˆ˜ ìˆì–´ìš”.",
        "setup": setup_level_40,
        "solution": lambda p, c: "qframeqgroupboxqpushbutton" in c,
        "correctCode": "QFrame QGroupBox QPushButton {\n  color: orange;\n}"
    },
    {
        "title": "[4-3] íˆ´íŒ ìŠ¤íƒ€ì¼ë§ (QToolTip)",
        "description": "ëª¨ë“  íˆ´íŒ(<code>QToolTip</code>)ì˜ ë°°ê²½ìƒ‰ì„ <code>#fffacd</code>, ê¸€ììƒ‰ì„ <code>black</code>ìœ¼ë¡œ ë°”ê¾¸ì„¸ìš”.",
        "hint": "ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” ë„ì›€ë§ í’ì„ ì€ QToolTip ìœ„ì ¯ìœ¼ë¡œ ìŠ¤íƒ€ì¼ë§í•  ìˆ˜ ìˆì–´ìš”.",
        "setup": lambda: [(lambda b: (b.setToolTip("ì´ê²ƒì€ íˆ´íŒì…ë‹ˆë‹¤!"), b)[1])(QPushButton("íˆ´íŒ ë²„íŠ¼"))],
        "solution": lambda p, c: "qtooltip" in c and "background-color" in c and "color" in c,
        "correctCode": "QToolTip {\n  background-color: #fffacd;\n  color: black;\n  border: 1px solid black;\n}"
    },
    {
        "title": "[4-4] ê·¸ë£¹ë°•ìŠ¤ ì œëª© (QGroupBox::title)",
        "description": "<code>QGroupBox</code>ì˜ ì œëª©(<code>::title</code>) ë¶€ë¶„ì˜ ê¸€ììƒ‰ì„ <code>#4fc3f7</code>(í•˜ëŠ˜ìƒ‰)ìœ¼ë¡œ ë°”ê¾¸ì„¸ìš”.",
        "hint": "ê·¸ë£¹ë°•ìŠ¤ì˜ ì œëª© ë¶€ë¶„ì€ '::title' ì„œë¸Œ ì»¨íŠ¸ë¡¤ë¡œ ì„ íƒí•  ìˆ˜ ìˆì–´ìš”.",
        "setup": lambda: [QGroupBox("ì œëª© ìŠ¤íƒ€ì¼ ë°”ê¾¸ê¸°")],
        "solution": lambda p, c: "qgroupbox::title" in c and "color" in c,
        "correctCode": "QGroupBox::title {\n  color: #4fc3f7;\n}"
    },
    {
        "title": "[4-5] ê·¸ë£¹ë°•ìŠ¤ ì œëª© ìœ„ì¹˜",
        "description": "<code>QGroupBox</code>ì˜ ì œëª©(<code>::title</code>)ì„ ê°€ìš´ë° ì •ë ¬í•˜ì„¸ìš”.",
        "hint": "ê·¸ë£¹ë°•ìŠ¤ ì œëª©ì˜ ìœ„ì¹˜ëŠ” 'subcontrol-position'ìœ¼ë¡œ ì¡°ì ˆí•  ìˆ˜ ìˆì–´ìš”.",
        "setup": lambda: [QGroupBox("ê°€ìš´ë° ì •ë ¬ëœ ì œëª©")],
        "solution": lambda p, c: "subcontrol-position" in c and "topcenter" in c,
        "correctCode": "QGroupBox::title {\n  subcontrol-position: top center;\n}"
    },
    {
        "title": "[4-6] ì½¤ë³´ë°•ìŠ¤ ë“œë¡­ë‹¤ìš´ ë²„íŠ¼ (QComboBox::drop-down)",
        "description": "<code>QComboBox</code>ì˜ í™”ì‚´í‘œ ë²„íŠ¼(<code>::drop-down</code>)ì˜ ë°°ê²½ìƒ‰ì„ <code>#0078d7</code>ë¡œ ë°”ê¾¸ì„¸ìš”.",
        "hint": "ì½¤ë³´ë°•ìŠ¤ì˜ í™”ì‚´í‘œ ë¶€ë¶„ì€ '::drop-down' ì„œë¸Œ ì»¨íŠ¸ë¡¤ë¡œ ì„ íƒí•´ìš”.",
        "setup": lambda: [QComboBox()],
        "solution": lambda p, c: "qcombobox::drop-down" in c,
        "correctCode": "QComboBox::drop-down {\n  background-color: #0078d7;\n}"
    },
    {
        "title": "[4-7] ìŠ¤í•€ë°•ìŠ¤ ìœ„ìª½ ë²„íŠ¼ (QSpinBox::up-button)",
        "description": "<code>QSpinBox</code>ì˜ ìœ„ìª½ í™”ì‚´í‘œ ë²„íŠ¼(<code>::up-button</code>)ì˜ ë°°ê²½ìƒ‰ì„ <code>#2ecc71</code> (ë…¹ìƒ‰)ìœ¼ë¡œ ë°”ê¾¸ì„¸ìš”.",
        "hint": "ìŠ¤í•€ë°•ìŠ¤ì˜ ìœ„ìª½ í™”ì‚´í‘œëŠ” '::up-button' ì„œë¸Œ ì»¨íŠ¸ë¡¤ì´ì—ìš”.",
        "setup": lambda: [QSpinBox()],
        "solution": lambda p, c: "qspinbox::up-button" in c,
        "correctCode": "QSpinBox::up-button {\n  background-color: #2ecc71;\n}"
    },
    {
        "title": "[4-8] ìŠ¤í•€ë°•ìŠ¤ ì•„ë˜ìª½ ë²„íŠ¼ (QSpinBox::down-button)",
        "description": "<code>QSpinBox</code>ì˜ ì•„ë˜ìª½ í™”ì‚´í‘œ ë²„íŠ¼(<code>::down-button</code>)ì˜ ë°°ê²½ìƒ‰ì„ <code>#e74c3c</code> (ë¹¨ê°„ìƒ‰)ìœ¼ë¡œ ë°”ê¾¸ì„¸ìš”.",
        "hint": "ìŠ¤í•€ë°•ìŠ¤ì˜ ì•„ë˜ìª½ í™”ì‚´í‘œëŠ” '::down-button' ì„œë¸Œ ì»¨íŠ¸ë¡¤ì´ì—ìš”.",
        "setup": lambda: [QSpinBox()],
        "solution": lambda p, c: "qspinbox::down-button" in c,
        "correctCode": "QSpinBox::down-button {\n  background-color: #e74c3c;\n}"
    },
    # --- 5ë‹¨ê³„: ì„œë¸Œ ì»¨íŠ¸ë¡¤ (6ë¬¸ì œ) ---
    {
        "title": "[5-1] ì²´í¬ë°•ìŠ¤ í‘œì‹œ ë¶€ë¶„ (::indicator)",
        "description": "<code>QCheckBox</code>ì˜ ë„¤ëª¨ë‚œ í‘œì‹œ ë¶€ë¶„(<code>::indicator</code>)ì˜ í¬ê¸°ë¥¼ <code>20px</code>ë¡œ í‚¤ìš°ì„¸ìš”.",
        "hint": "ìœ„ì ¯ì˜ íŠ¹ì • ë¶€ë¶„ì„ ê¾¸ë°€ ë•ŒëŠ” '::' ê¸°í˜¸ë¥¼ ì‚¬ìš©í•´ìš”.",
        "setup": lambda: [QCheckBox("ì²´í¬ë°•ìŠ¤")],
        "solution": lambda p, c: "qcheckbox::indicator" in c and "width" in c,
        "correctCode": "QCheckBox::indicator {\n  width: 20px;\n  height: 20px;\n}"
    },
    {
        "title": "[5-2] ì²´í¬ëœ ì²´í¬ë°•ìŠ¤ í‘œì‹œ",
        "description": "<code>QCheckBox</code>ê°€ ì²´í¬ë˜ì—ˆì„ ë•Œ(<code>:checked</code>), í‘œì‹œ ë¶€ë¶„(<code>::indicator</code>)ì˜ ë°°ê²½ìƒ‰ì„ <code>#0078d7</code>ë¡œ ë°”ê¾¸ì„¸ìš”.",
        "hint": "ìƒíƒœ ì„ íƒìì™€ ì„œë¸Œ ì»¨íŠ¸ë¡¤ì„ ì¡°í•©í•  ìˆ˜ ìˆì–´ìš”. ì˜ˆ: QWidget::sub-control:state",
        "setup": lambda: [(lambda cb: (cb.setChecked(True), cb)[1])(QCheckBox("ì²´í¬ë¨"))],
        "solution": lambda p, c: "qcheckbox::indicator:checked" in c,
        "correctCode": "QCheckBox::indicator:checked {\n  background-color: #0078d7;\n}"
    },
    {
        "title": "[5-3] ë¼ë””ì˜¤ ë²„íŠ¼ í‘œì‹œ ë¶€ë¶„",
        "description": "<code>QRadioButton</code>ì˜ ë™ê·¸ë€ í‘œì‹œ ë¶€ë¶„(<code>::indicator</code>)ì„ ë‘¥ê¸€ê²Œ(<code>border-radius: 8px</code>) ë§Œë“œì„¸ìš”.",
        "hint": "ë¼ë””ì˜¤ ë²„íŠ¼ì˜ ë™ê·¸ë€ ë¶€ë¶„ë„ '::indicator'ë¼ê³  ë¶ˆëŸ¬ìš”.",
        "setup": lambda: [QRadioButton("ë¼ë””ì˜¤ ë²„íŠ¼")],
        "solution": lambda p, c: "qradiobutton::indicator" in c and "border-radius" in c,
        "correctCode": "QRadioButton::indicator {\n  border-radius: 8px;\n}"
    },
    {
        "title": "[5-4] ì²´í¬ëœ ë¼ë””ì˜¤ ë²„íŠ¼ í‘œì‹œ",
        "description": "<code>QRadioButton</code>ì´ ì²´í¬ë˜ì—ˆì„ ë•Œ(<code>:checked</code>), ë™ê·¸ë€ ë¶€ë¶„(<code>::indicator</code>)ì˜ ë°°ê²½ì„ íŒŒë€ìƒ‰ìœ¼ë¡œ ì±„ìš°ì„¸ìš”.",
        "hint": "ì²´í¬ëœ ìƒíƒœëŠ” ':checked'ë¥¼ ì‚¬ìš©í•´ìš”.",
        "setup": lambda: [(lambda r: (r.setChecked(True), r)[1])(QRadioButton("ì²´í¬ëœ ë¼ë””ì˜¤"))],
        "solution": lambda p, c: "qradiobutton::indicator:checked" in c,
        "correctCode": "QRadioButton::indicator:checked {\n  background-color: #0078d7;\n}"
    },
    {
        "title": "[5-5] í”„ë¡œê·¸ë ˆìŠ¤ ë°” ë°°ê²½",
        "description": "<code>QProgressBar</code>ì˜ ë°°ê²½(ì „ì²´ ë§‰ëŒ€)ì˜ ìƒ‰ì„ <code>#ddd</code>ë¡œ ë°”ê¾¸ì„¸ìš”.",
        "hint": "í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì „ì²´ëŠ” QProgressBar ìì²´ë¥¼ ì„ íƒí•´ì„œ ìŠ¤íƒ€ì¼ì„ ì ìš©í•´ìš”.",
        "setup": lambda: [(lambda p: (p.setValue(50), p)[1])(QProgressBar())],
        "solution": lambda p, c: "qprogressbar" in c and "::" not in c,
        "correctCode": "QProgressBar {\n  background-color: #ddd;\n}"
    },
    {
        "title": "[5-6] í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì±„ì›Œì§„ ë¶€ë¶„ (::chunk)",
        "description": "<code>QProgressBar</code>ì˜ ì±„ì›Œì§„ ë¶€ë¶„(<code>::chunk</code>)ì˜ ë°°ê²½ìƒ‰ì„ <code>#2ecc71</code> (ë…¹ìƒ‰)ìœ¼ë¡œ ë°”ê¾¸ì„¸ìš”.",
        "hint": "í”„ë¡œê·¸ë ˆìŠ¤ ë°”ì˜ ì±„ì›Œì§„ ë¶€ë¶„ì€ '::chunk'ë¼ê³  í•´ìš”.",
        "setup": lambda: [(lambda p: (p.setValue(50), p)[1])(QProgressBar())],
        "solution": lambda p, c: "qprogressbar::chunk" in c,
        "correctCode": "QProgressBar::chunk {\n  background-color: #2ecc71;\n}"
    },
    # --- 6ë‹¨ê³„: ê³ ê¸‰ ìŠ¤íƒ€ì¼ë§ ë° ì¡°í•© (8ë¬¸ì œ) ---
    {
        "title": "[6-1] ê·¸ë¼ë°ì´ì…˜ ë°°ê²½",
        "description": "<code>QPushButton</code>ì˜ ë°°ê²½ì„ ìœ„(íŒŒë‘)ì—ì„œ ì•„ë˜(ì´ˆë¡)ë¡œ ë³€í•˜ëŠ” ê·¸ë¼ë°ì´ì…˜ìœ¼ë¡œ ë§Œë“œì„¸ìš”.",
        "hint": "ì„ í˜• ê·¸ë¼ë°ì´ì…˜ì€ 'qlineargradient'ë¥¼ ì‚¬ìš©í•´ìš”.",
        "setup": lambda: [QPushButton("ê·¸ë¼ë°ì´ì…˜ ë²„íŠ¼")],
        "solution": lambda p, c: "qlineargradient" in c,
        "correctCode": "QPushButton {\n  background-color: qlineargradient(x1:0, y1:0, x2:0, y2:1, stop:0 #0078d7, stop:1 #2ecc71);\n}"
    },
    {
        "title": "[6-2] íˆ¬ëª…ë„ ì¡°ì ˆ (opacity)",
        "description": "ëª¨ë“  <code>QPushButton</code>ì˜ íˆ¬ëª…ë„ë¥¼ <code>0.7</code>ë¡œ ì„¤ì •í•˜ì„¸ìš”.",
        "hint": "íˆ¬ëª…ë„ëŠ” 'opacity' ì†ì„±ì„ ì‚¬ìš©í•´ìš”. 0ì€ ì™„ì „ íˆ¬ëª…, 1ì€ ì™„ì „ ë¶ˆíˆ¬ëª…ì´ì—ìš”.",
        "setup": lambda: [QPushButton("ë°˜íˆ¬ëª… ë²„íŠ¼")],
        "solution": lambda p, c: "opacity" in c and "0.7" in c,
        "correctCode": "QPushButton {\n  opacity: 0.7;\n}"
    },
    {
        "title": "[6-3] ë°°ê²½ ì´ë¯¸ì§€ ë„£ê¸°",
        "description": "<code>#imageButton</code> ë²„íŠ¼ì— ë°°ê²½ ì´ë¯¸ì§€ë¥¼ ë„£ì–´ë³´ì„¸ìš”.",
        "hint": "ë°°ê²½ ì´ë¯¸ì§€ëŠ” 'background-image' ì†ì„±ê³¼ 'url()' í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ìš”.",
        "setup": setup_level_20,
        "solution": lambda p, c: "background-image" in c and "url" in c,
        "correctCode": "#imageButton {\n  background-image: url('path/to/your/image.png');\n}"
    },
    {
        "title": "[6-4] ë°°ê²½ ì´ë¯¸ì§€ ë°˜ë³µ ì—†ì• ê¸°",
        "description": "ë²„íŠ¼ì˜ ë°°ê²½ ì´ë¯¸ì§€ê°€ ë°˜ë³µë˜ì§€ ì•Šë„ë¡ ì„¤ì •í•˜ì„¸ìš”.",
        "hint": "ë°°ê²½ ì´ë¯¸ì§€ê°€ ë°˜ë³µë˜ì§€ ì•Šê²Œ í•˜ë ¤ë©´ 'background-repeat: no-repeat;'ë¥¼ ì‚¬ìš©í•´ìš”.",
        "setup": lambda: [QPushButton()],
        "solution": lambda p, c: "background-repeat" in c and "no-repeat" in c,
        "correctCode": "QPushButton {\n  background-image: url(path/to/image.png);\n  background-repeat: no-repeat;\n}"
    },
    {
        "title": "[6-5] ë°°ê²½ ì´ë¯¸ì§€ ìœ„ì¹˜",
        "description": "ë²„íŠ¼ì˜ ë°°ê²½ ì´ë¯¸ì§€ë¥¼ ê°€ìš´ë°ë¡œ ì˜¤ê²Œ í•˜ì„¸ìš”.",
        "hint": "ë°°ê²½ ì´ë¯¸ì§€ ìœ„ì¹˜ëŠ” 'background-position: center;' ì²˜ëŸ¼ ì¡°ì ˆí•  ìˆ˜ ìˆì–´ìš”.",
        "setup": lambda: [QPushButton()],
        "solution": lambda p, c: "background-position" in c and "center" in c,
        "correctCode": "QPushButton {\n  background-image: url(path/to/image.png);\n  background-repeat: no-repeat;\n  background-position: center;\n}"
    },
    {
        "title": "[6-6] í…Œë‘ë¦¬ ê° ë¶€ë¶„ ë‹¤ë¥´ê²Œ",
        "description": "ë²„íŠ¼ì˜ ìœ„ìª½ í…Œë‘ë¦¬ëŠ” <code>3px solid red</code>, ì•„ë˜ìª½ì€ <code>3px solid blue</code>ë¡œ ì„¤ì •í•˜ì„¸ìš”.",
        "hint": "border-top-color, border-right-style ì²˜ëŸ¼ ë°©í–¥ê³¼ ì†ì„±ì„ ì¡°í•©í•  ìˆ˜ ìˆì–´ìš”.",
        "setup": lambda: [QPushButton("ìœ„ì•„ë˜ í…Œë‘ë¦¬")],
        "solution": lambda p, c: "border-top" in c and "border-bottom" in c,
        "correctCode": "QPushButton {\n  border-top: 3px solid red;\n  border-bottom: 3px solid blue;\n}"
    },
    {
        "title": "[6-7] ê¸€ì ê°„ê²© ì¡°ì ˆ (letter-spacing)",
        "description": "<code>QLabel</code>ì˜ ê¸€ì ê°„ê²©ì„ <code>3px</code>ë¡œ ì„¤ì •í•˜ì„¸ìš”.",
        "hint": "ê¸€ì ì‚¬ì´ì˜ ê°„ê²©ì€ 'letter-spacing'ìœ¼ë¡œ ì¡°ì ˆí•´ìš”.",
        "setup": lambda: [QLabel("ê¸€ ì ê°„ ê²©")],
        "solution": lambda p, c: "letter-spacing" in c and "3px" in c,
        "correctCode": "QLabel {\n  letter-spacing: 3px;\n}"
    },
    {
        "title": "[6-8] ìµœì¢… ë¯¸ì…˜!",
        "description": "ìš”êµ¬ì‚¬í•­ì— ë§ê²Œ ì„¸ ê°€ì§€ ìŠ¤íƒ€ì¼ì„ ëª¨ë‘ ì ìš©í•´ë³´ì„¸ìš”.",
        "hint": "ì§€ê¸ˆê¹Œì§€ ë°°ìš´ ì„ íƒìë“¤ì„ ì¡°í•©í•´ì„œ ì‚¬ìš©í•´ë³´ì„¸ìš”!",
        "setup": setup_level_50,
        "solution": lambda p, c: "#finalbutton:pressed" in c and "#cancelbutton:hover" in c and "qlineedit:focus" in c,
        "correctCode": "#finalButton:pressed {\n  border: 2px solid green;\n}\n#cancelButton:hover {\n  background-color: red;\n}\nQLineEdit:focus {\n  background-color: yellow;\n}"
    }
]

class AnswerDialog(QDialog):
    def __init__(self, correct_code, parent=None):
        super().__init__(parent)
        self.setWindowTitle("ì •ë‹µ ì½”ë“œ")
        self.correct_code = correct_code

        layout = QVBoxLayout(self)

        self.code_display = QTextEdit()
        self.code_display.setReadOnly(True)
        self.code_display.setText(self.correct_code)
        self.code_display.setStyleSheet("""
            QTextEdit {
                background-color: #2a2a2a;
                color: #a7f3d0;
                padding: 10px;
                border-radius: 4px;
                font-family: 'D2Coding', 'Courier New';
            }
        """)
        layout.addWidget(self.code_display)

        button_layout = QHBoxLayout()
        self.copy_button = QPushButton("ë³µì‚¬í•˜ê¸°")
        self.copy_button.clicked.connect(self.copy_code)
        self.close_button = QPushButton("ë‹«ê¸°")
        self.close_button.clicked.connect(self.accept)

        button_layout.addStretch()
        button_layout.addWidget(self.copy_button)
        button_layout.addWidget(self.close_button)
        layout.addLayout(button_layout)

    def copy_code(self):
        clipboard = QApplication.clipboard()
        clipboard.setText(self.correct_code)
        self.copy_button.setText("ë³µì‚¬ë¨!")
        QTimer.singleShot(1500, lambda: self.copy_button.setText("ë³µì‚¬í•˜ê¸°"))


class QSSTutorialApp(QWidget):
    def __init__(self):
        super().__init__()
        self.current_level = 0
        self.wrong_attempts = [0] * len(LEVELS)
        self.init_ui()
        self.load_level(0)

    def init_ui(self):
        self.setWindowTitle("QSS GUI íŠœí† ë¦¬ì–¼")
        self.setGeometry(100, 100, 1200, 700)
        self.setStyleSheet("""
            QWidget {
                font-family: 'Noto Sans KR';
                background-color: #3c3c3c;
                color: #f0f0f0;
            }
            .panel {
                background-color: #505050;
                border: 1px solid #2a2a2a;
                border-radius: 8px;
            }
            .panel QLabel { color: #f0f0f0; }
            .panel QLineEdit { background-color: #2a2a2a; color: #f0f0f0; border: 1px solid #6a6a6a; border-radius: 4px; padding: 5px; }
            .panel QPushButton { 
                background-color: #606060; 
                border: 1px solid #2a2a2a;
                padding: 8px;
                border-radius: 4px;
            }
            .panel QPushButton:hover { background-color: #707070; }
        """)

        main_layout = QHBoxLayout()
        
        # --- Left Panel ---
        left_panel = QWidget()
        left_panel.setObjectName("panel")
        left_layout = QVBoxLayout(left_panel)
        
        self.level_title_label = QLabel("ë ˆë²¨ ì œëª©")
        self.level_title_label.setStyleSheet("font-size: 20px; font-weight: bold; color: #4fc3f7;")
        
        self.level_description_label = QLabel("ë ˆë²¨ ì„¤ëª…")
        self.level_description_label.setWordWrap(True)
        self.level_description_label.setTextInteractionFlags(Qt.TextSelectableByMouse)
        
        hint_box = QGroupBox("ğŸ’¡ QSS í•µì‹¬ íŒ!")
        hint_box.setStyleSheet("QGroupBox { border: 1px solid #4fc3f7; border-radius: 5px; margin-top: 10px; } QGroupBox::title { subcontrol-origin: margin; left: 10px; padding: 0 5px 0 5px; }")
        hint_layout = QVBoxLayout(hint_box)
        self.level_hint_label = QLabel("íŒíŠ¸ ë‚´ìš©")
        self.level_hint_label.setWordWrap(True)
        hint_layout.addWidget(self.level_hint_label)

        self.qss_editor = QTextEdit()
        self.qss_editor.setPlaceholderText("ì—¬ê¸°ì— QSS ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”...")
        self.qss_editor.setStyleSheet("background-color: #2a2a2a; color: #f0f0f0; border: 1px solid #6a6a6a; border-radius: 4px; font-family: 'D2Coding', 'Courier New';")
        
        self.qss_editor.textChanged.connect(self.apply_styles)
        
        self.check_answer_button = QPushButton("ì •ë‹µ ê²€ì‚¬í•˜ê¸°")
        self.check_answer_button.clicked.connect(self.check_answer)

        self.show_answer_button = QPushButton("ì •ë‹µ ë³´ê¸°")
        self.show_answer_button.setVisible(False)
        self.show_answer_button.clicked.connect(self.show_correct_answer)
        self.show_answer_button.setStyleSheet("background-color: #fbc02d; color: #111;")
        
        button_layout = QHBoxLayout()
        button_layout.addWidget(self.check_answer_button)
        button_layout.addWidget(self.show_answer_button)

        self.feedback_label = QLabel("")
        self.feedback_label.setAlignment(Qt.AlignCenter)

        left_layout.addWidget(self.level_title_label)
        left_layout.addWidget(self.level_description_label)
        left_layout.addWidget(hint_box)
        left_layout.addWidget(QLabel("QSS ì½”ë“œ ì‘ì„±:"))
        left_layout.addWidget(self.qss_editor, 1) # Stretch factor
        left_layout.addLayout(button_layout)
        left_layout.addWidget(self.feedback_label)

        # --- Right Panel ---
        right_panel = QWidget()
        right_panel.setObjectName("panel")
        right_layout = QVBoxLayout(right_panel)
        
        preview_label = QLabel("ğŸ¨ ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°")
        preview_label.setAlignment(Qt.AlignCenter)
        preview_label.setStyleSheet("font-size: 16px; font-weight: bold;")
        
        self.preview_window = QWidget()
        self.preview_window.setStyleSheet("background-color: #f0f0f0; border-radius: 6px; border: 1px solid #adadad;")
        
        preview_window_layout = QVBoxLayout(self.preview_window)
        preview_window_layout.setContentsMargins(1,1,1,1)
        
        title_bar = QLabel("YourApp")
        title_bar.setStyleSheet("background-color: #e1e1e1; color: #333; font-weight: bold; padding: 4px 8px; border-bottom: 1px solid #ccc; border-top-left-radius: 6px; border-top-right-radius: 6px;")
        
        self.preview_area = QWidget()
        self.preview_area_layout = QVBoxLayout(self.preview_area)
        self.preview_area_layout.setAlignment(Qt.AlignCenter)

        preview_window_layout.addWidget(title_bar)
        preview_window_layout.addWidget(self.preview_area, 1)

        right_layout.addWidget(preview_label)
        right_layout.addWidget(self.preview_window, 1)

        # --- Footer ---
        footer = QWidget()
        footer.setObjectName("panel")
        footer_layout = QHBoxLayout(footer)
        
        self.prev_button = QPushButton("< ì´ì „")
        self.prev_button.clicked.connect(self.prev_level)
        self.level_indicator_label = QLabel("1 / 50")
        self.next_button = QPushButton("ë‹¤ìŒ >")
        self.next_button.clicked.connect(self.next_level)

        self.level_jump_input = QLineEdit()
        self.level_jump_input.setPlaceholderText("ë²ˆí˜¸")
        self.level_jump_input.setFixedWidth(50)
        self.level_jump_btn = QPushButton("ì´ë™")
        self.level_jump_btn.clicked.connect(self.jump_to_level)

        self.reset_button = QPushButton("ì´ˆê¸°í™”")
        self.reset_button.setStyleSheet("background-color: #d32f2f;")
        self.reset_button.clicked.connect(self.reset_level)

        footer_layout.addWidget(self.prev_button)
        footer_layout.addWidget(self.level_indicator_label)
        footer_layout.addWidget(self.next_button)
        footer_layout.addStretch()
        footer_layout.addWidget(self.level_jump_input)
        footer_layout.addWidget(self.level_jump_btn)
        footer_layout.addStretch()
        footer_layout.addWidget(self.reset_button)

        # --- Main Layout Assembly ---
        main_widget = QWidget()
        main_layout.addWidget(left_panel, 1)
        main_layout.addWidget(right_panel, 1)
        main_widget.setLayout(main_layout)

        final_layout = QVBoxLayout(self)
        final_layout.addWidget(main_widget)
        final_layout.addWidget(footer)

    def load_level(self, level_index):
        self.current_level = level_index
        level_data = LEVELS[level_index]

        while self.preview_area_layout.count():
            child = self.preview_area_layout.takeAt(0)
            if child.widget():
                child.widget().deleteLater()

        widgets = level_data["setup"]()
        for widget in widgets:
            self.preview_area_layout.addWidget(widget)

        self.level_title_label.setText(level_data["title"])
        self.level_description_label.setText(level_data["description"])
        self.level_hint_label.setText(level_data["hint"])
        self.level_indicator_label.setText(f"{level_index + 1} / {len(LEVELS)}")

        self.qss_editor.clear()
        self.feedback_label.setText("")
        self.show_answer_button.setVisible(False)
        
        self.prev_button.setEnabled(level_index > 0)
        self.next_button.setEnabled(False)
        
        self.apply_styles()

    def apply_styles(self):
        stylesheet = self.qss_editor.toPlainText()
        self.preview_area.setStyleSheet(stylesheet)

    def check_answer(self):
        level_data = LEVELS[self.current_level]
        user_code = self.qss_editor.toPlainText().lower().replace("\n", "").replace(" ", "")
        
        is_correct = False
        try:
            is_correct = level_data["solution"](self.preview_area, user_code)
        except Exception as e:
            print(f"Error in solution check for level {self.current_level + 1}: {e}")
            is_correct = False

        if is_correct:
            self.feedback_label.setText("ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤! ë‹¤ìŒìœ¼ë¡œ ì§„í–‰í•˜ì„¸ìš”.")
            self.feedback_label.setStyleSheet("color: #69f0ae;")
            self.next_button.setEnabled(True)
            self.wrong_attempts[self.current_level] = 0
            self.show_answer_button.setVisible(False)
        else:
            if not user_code.strip():
                self.feedback_label.setText("ì½”ë“œë¥¼ ì…ë ¥í•˜ê³  ê²€ì‚¬í•´ì£¼ì„¸ìš”.")
                self.feedback_label.setStyleSheet("color: #f0f0f0;")
                return

            self.wrong_attempts[self.current_level] += 1
            attempts = self.wrong_attempts[self.current_level]
            if attempts >= 5:
                self.feedback_label.setText("ë‹¤ì„¯ ë²ˆ ì‹œë„í–ˆì–´ìš”. ì •ë‹µì„ í™•ì¸í•˜ê³  ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.")
                self.feedback_label.setStyleSheet("color: #ffcc80;")
                self.show_answer_button.setVisible(True)
                self.next_button.setEnabled(True)
            else:
                self.feedback_label.setText(f"ğŸ¤” ì¡°ê¸ˆ ë‹¤ë¥´ë„¤ìš”. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”! ({attempts}/5)")
                self.feedback_label.setStyleSheet("color: #ff8a80;")

    def show_correct_answer(self):
        level_data = LEVELS[self.current_level]
        dialog = AnswerDialog(level_data['correctCode'], self)
        dialog.exec_()

    def next_level(self):
        if self.current_level < len(LEVELS) - 1:
            self.load_level(self.current_level + 1)

    def prev_level(self):
        if self.current_level > 0:
            self.load_level(self.current_level - 1)
            
    def jump_to_level(self):
        level_num_str = self.level_jump_input.text()
        try:
            level_num = int(level_num_str)
            if 1 <= level_num <= len(LEVELS):
                self.load_level(level_num - 1)
                self.level_jump_input.clear()
            else:
                raise ValueError
        except (ValueError, TypeError):
            QMessageBox.warning(self, "ì…ë ¥ ì˜¤ë¥˜", f"1ì—ì„œ {len(LEVELS)} ì‚¬ì´ì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")
            self.level_jump_input.clear()

    def reset_level(self):
        self.wrong_attempts[self.current_level] = 0
        self.load_level(self.current_level)

if __name__ == '__main__':
    app = QApplication(sys.argv)
    ex = QSSTutorialApp()
    ex.show()
    sys.exit(app.exec_())
